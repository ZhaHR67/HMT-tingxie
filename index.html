<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2113.65">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6d6d6d; -webkit-text-stroke: #6d6d6d}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #0000ff; -webkit-text-stroke: #0000ff}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6b0001; -webkit-text-stroke: #6b0001}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #fb0007; -webkit-text-stroke: #fb0007}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; -webkit-text-stroke: #000000}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #18702b; -webkit-text-stroke: #18702b}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #4d5055; -webkit-text-stroke: #4d5055}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; -webkit-text-stroke: #000000; min-height: 16.0px}
    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #18702b; -webkit-text-stroke: #18702b; min-height: 16.0px}
    span.s1 {font-kerning: none; background-color: #ecf1f7}
    span.s2 {font-kerning: none; color: #fb0007; background-color: #ecf1f7; -webkit-text-stroke: 0px #fb0007}
    span.s3 {font-kerning: none; color: #2a2a2a; background-color: #ecf1f7; -webkit-text-stroke: 0px #2a2a2a}
    span.s4 {font-kerning: none; color: #6b0001; background-color: #ecf1f7; -webkit-text-stroke: 0px #6b0001}
    span.s5 {font-kerning: none; color: #000000; background-color: #ecf1f7; -webkit-text-stroke: 0px #000000}
    span.s6 {font-kerning: none; color: #0000ff; background-color: #ecf1f7; -webkit-text-stroke: 0px #0000ff}
    span.s7 {font: 14.0px 'PingFang SC'; font-kerning: none; background-color: #ecf1f7}
    span.s8 {font-kerning: none; color: #6f0ec3; background-color: #ecf1f7; -webkit-text-stroke: 0px #6f0ec3}
    span.s9 {font-kerning: none; color: #093c94; background-color: #ecf1f7; -webkit-text-stroke: 0px #093c94}
    span.s10 {font-kerning: none; color: #18702b; background-color: #ecf1f7; -webkit-text-stroke: 0px #18702b}
    span.s11 {font-kerning: none; color: #137646; background-color: #ecf1f7; -webkit-text-stroke: 0px #137646}
    span.s12 {font-kerning: none}
    span.s13 {font-kerning: none; color: #a4450b; background-color: #ecf1f7; -webkit-text-stroke: 0px #a4450b}
    span.s14 {font-kerning: none; color: #0e6e6d; background-color: #ecf1f7; -webkit-text-stroke: 0px #0e6e6d}
    span.s15 {font: 14.0px 'PingFang SC'; font-kerning: none; color: #18702b; background-color: #ecf1f7; -webkit-text-stroke: 0px #18702b}
    span.s16 {font-kerning: none; color: #4d5055; background-color: #ecf1f7; -webkit-text-stroke: 0px #4d5055}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE</span><span class="s2"> html</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3">&lt;</span><span class="s4">html</span><span class="s5"> </span><span class="s2">lang</span><span class="s3">=</span><span class="s1">"zh-CN"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">meta</span><span class="s5"> </span><span class="s1">charset</span><span class="s3">=</span><span class="s6">"UTF-8"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">meta</span><span class="s5"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"viewport"</span><span class="s5"> </span><span class="s2">content</span><span class="s3">=</span><span class="s1">"width=device-width, initial-scale=1.0"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">title</span><span class="s3">&gt;</span><span class="s7">欢乐伙伴</span><span class="s1"> - </span><span class="s7">听写大王</span><span class="s3">&lt;/</span><span class="s4">title</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">script</span><span class="s5"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.tailwindcss.com"</span><span class="s3">&gt;&lt;/</span><span class="s4">script</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">script</span><span class="s5"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://unpkg.com/lucide@latest"</span><span class="s3">&gt;&lt;/</span><span class="s4">script</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s8">@import</span><span class="s5"> </span><span class="s9">url</span><span class="s5">(</span><span class="s1">'https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700;900&amp;display=swap'</span><span class="s5">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">body</span><span class="s1"> { </span><span class="s2">font-family:</span><span class="s1"> </span><span class="s10">'Noto Sans SC'</span><span class="s1">, </span><span class="s9">sans-serif</span><span class="s1">; }</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.custom-scrollbar::-webkit-scrollbar</span><span class="s5"> { </span><span class="s2">width:</span><span class="s5"> </span><span class="s11">4px</span><span class="s5">; }</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.custom-scrollbar::-webkit-scrollbar-thumb</span><span class="s5"> { </span><span class="s2">background:</span><span class="s5"> </span><span class="s9">#e2e8f0</span><span class="s5">; </span><span class="s2">border-radius:</span><span class="s5"> </span><span class="s11">10px</span><span class="s5">; }</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;/</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s3">&lt;</span><span class="s4">body</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-slate-50"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"app"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"max-w-md mx-auto min-h-screen bg-white shadow-xl relative overflow-x-hidden"</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- Content will be injected here by JavaScript --&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p8"><span class="s12"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">// --- App State ---</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">let</span><span class="s1"> state = {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>view: </span><span class="s10">'home'</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>selectedLevel: </span><span class="s8">null</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>customWords: [],</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>sessionWords: [],</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>currentWordIndex: </span><span class="s13">0</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>isShuffle: </span><span class="s8">true</span><span class="s1">,</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>isSpeaking: </span><span class="s8">false</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>};</span></p>
<p class="p8"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">const</span><span class="s1"> </span><span class="s14">SYLLABUS</span><span class="s1"> = {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">"1A"</span><span class="s1">: [</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>{ word: </span><span class="s10">"</span><span class="s15">阿姨</span><span class="s10">"</span><span class="s1">, pinyin: </span><span class="s10">"ā yí"</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>{ word: </span><span class="s10">"</span><span class="s15">公园</span><span class="s10">"</span><span class="s1">, pinyin: </span><span class="s10">"gōng yuán"</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>{ word: </span><span class="s10">"</span><span class="s15">跑步</span><span class="s10">"</span><span class="s1">, pinyin: </span><span class="s10">"pǎo bù"</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>{ word: </span><span class="s10">"</span><span class="s15">拍手</span><span class="s10">"</span><span class="s1">, pinyin: </span><span class="s10">"pāi shǒu"</span><span class="s1"> }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>],</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">"3A"</span><span class="s1">: [</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>{ word: </span><span class="s10">"</span><span class="s15">照顾</span><span class="s10">"</span><span class="s1">, pinyin: </span><span class="s10">"zhào gù"</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>{ word: </span><span class="s10">"</span><span class="s15">环境</span><span class="s10">"</span><span class="s1">, pinyin: </span><span class="s10">"huán jìng"</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>{ word: </span><span class="s10">"</span><span class="s15">邻居</span><span class="s10">"</span><span class="s1">, pinyin: </span><span class="s10">"lín jū"</span><span class="s1"> }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>]</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>};</span></p>
<p class="p8"><span class="s12"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s8">const</span><span class="s5"> </span><span class="s14">GRADES</span><span class="s5"> = [</span><span class="s1">"1A"</span><span class="s5">, </span><span class="s1">"1B"</span><span class="s5">, </span><span class="s1">"2A"</span><span class="s5">, </span><span class="s1">"2B"</span><span class="s5">, </span><span class="s1">"3A"</span><span class="s5">, </span><span class="s1">"3B"</span><span class="s5">, </span><span class="s1">"4A"</span><span class="s5">, </span><span class="s1">"4B"</span><span class="s5">, </span><span class="s1">"5A"</span><span class="s5">, </span><span class="s1">"5B"</span><span class="s5">, </span><span class="s1">"6A"</span><span class="s5">, </span><span class="s1">"6B"</span><span class="s5">];</span></p>
<p class="p8"><span class="s12"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">// --- Core Functions ---</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> speak(text) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">if</span><span class="s1"> (!text) </span><span class="s8">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>window.speechSynthesis.cancel();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> utterance = </span><span class="s8">new</span><span class="s1"> </span><span class="s14">SpeechSynthesisUtterance</span><span class="s1">(text);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>utterance.lang = </span><span class="s10">'zh-CN'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>utterance.rate = </span><span class="s13">0.8</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>utterance.onstart = () =&gt; { state.isSpeaking = </span><span class="s8">true</span><span class="s1">; render(); };</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>utterance.onend = () =&gt; { state.isSpeaking = </span><span class="s8">false</span><span class="s1">; render(); };</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>window.speechSynthesis.speak(utterance);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> shuffle(array) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">let</span><span class="s1"> arr = [...array];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">for</span><span class="s1"> (</span><span class="s8">let</span><span class="s1"> i = arr.length - </span><span class="s13">1</span><span class="s1">; i &gt; </span><span class="s13">0</span><span class="s1">; i--) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">const</span><span class="s1"> j = </span><span class="s14">Math</span><span class="s1">.floor(</span><span class="s14">Math</span><span class="s1">.random() * (i + </span><span class="s13">1</span><span class="s1">));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>[arr[i], arr[arr[j]]] = [arr[j], arr[i]]; </span><span class="s16">// Simplified shuffle</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">return</span><span class="s1"> arr.sort(() =&gt; </span><span class="s14">Math</span><span class="s1">.random() - </span><span class="s13">0.5</span><span class="s1">); </span><span class="s16">// Fast shuffle for web</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> startDictation(level, isCustom) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">let</span><span class="s1"> source = isCustom ? state.customWords : (</span><span class="s14">SYLLABUS</span><span class="s1">[level] || []);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">if</span><span class="s1"> (source.length === </span><span class="s13">0</span><span class="s1">) </span><span class="s8">return</span><span class="s1">;</span></p>
<p class="p8"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>state.sessionWords = state.isShuffle ? shuffle(source) : [...source];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>state.selectedLevel = isCustom ? </span><span class="s10">"</span><span class="s15">自定义</span><span class="s10">"</span><span class="s1"> : level;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>state.currentWordIndex = </span><span class="s13">0</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>state.view = </span><span class="s10">'dictation'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>render();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>setTimeout(() =&gt; speak(state.sessionWords[</span><span class="s13">0</span><span class="s1">].word), </span><span class="s13">500</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> handleFileUpload(e) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> file = e.target.files[</span><span class="s13">0</span><span class="s1">];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">if</span><span class="s1"> (!file) </span><span class="s8">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> reader = </span><span class="s8">new</span><span class="s1"> </span><span class="s14">FileReader</span><span class="s1">();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>reader.onload = (event) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">const</span><span class="s1"> text = event.target.result;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">const</span><span class="s1"> words = text.split(</span><span class="s4">/[\n,]+/</span><span class="s1">).map(w =&gt; w.trim()).filter(w =&gt; w !== </span><span class="s10">''</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>state.customWords = words.map(w =&gt; ({ word: w, pinyin: </span><span class="s10">""</span><span class="s1"> }));</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>render();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>reader.readAsText(file);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s12"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">// --- View Templates ---</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> render() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">const</span><span class="s1"> container = document.getElementById(</span><span class="s10">'app'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">let</span><span class="s1"> html = </span><span class="s10">""</span><span class="s1">;</span></p>
<p class="p8"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">if</span><span class="s1"> (state.view === </span><span class="s10">'home'</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>html = </span><span class="s10">`</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex flex-col items-center justify-center min-h-[80vh] text-center p-6"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="w-24 h-24 bg-red-500 rounded-3xl flex items-center justify-center mb-6 shadow-xl shadow-red-200"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;i data-lucide="book" class="text-white w-12 h-12"&gt;&lt;/i&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;h1 class="text-4xl font-black text-slate-800 mb-2"&gt;</span><span class="s7">欢乐伙伴</span><span class="s1">&lt;/h1&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;p class="text-xl text-slate-500 mb-10 font-medium"&gt;</span><span class="s7">听写大王</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="w-full max-w-xs space-y-4"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button onclick="state.view='level-select'; render()" class="w-full bg-red-500 text-white font-bold py-4 rounded-2xl shadow-lg flex items-center justify-center space-x-2"&gt;</span><span class="s7">同步教材</span><span class="s1">&lt;/button&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button onclick="state.view='custom-upload'; render()" class="w-full bg-blue-500 text-white font-bold py-4 rounded-2xl shadow-lg flex items-center justify-center space-x-2"&gt;</span><span class="s7">输入</span><span class="s1">/</span><span class="s7">上传</span><span class="s1">&lt;/button&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span>`</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s8">else</span><span class="s1"> </span><span class="s8">if</span><span class="s1"> (state.view === </span><span class="s10">'level-select'</span><span class="s1"> || state.view === </span><span class="s10">'custom-upload'</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">const</span><span class="s1"> isCustom = state.view === </span><span class="s10">'custom-upload'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>html = </span><span class="s10">`</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="p-6 pb-24 flex flex-col min-h-screen"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="flex items-center mb-8"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button onclick="state.view='home'; render()" class="p-2 mr-4 bg-slate-100 rounded-xl"&gt;&lt;i data-lucide="chevron-left"&gt;&lt;/i&gt;&lt;/button&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;h2 class="text-2xl font-bold text-slate-800"&gt;</span><span class="s5">${isCustom ? </span><span class="s1">'</span><span class="s7">自定义词语</span><span class="s1">'</span><span class="s5"> : </span><span class="s1">'</span><span class="s7">同步教材</span><span class="s1">'</span><span class="s5">}</span><span class="s1">&lt;/h2&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p9"><span class="s1"><span class="Apple-converted-space">                        </span></span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="bg-slate-100 p-1.5 rounded-2xl flex items-center mb-6"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button onclick="state.isShuffle=false; render()" class="flex-1 py-3 rounded-xl font-bold </span><span class="s5">${!state.isShuffle ? </span><span class="s1">'bg-white shadow-sm text-slate-800'</span><span class="s5"> : </span><span class="s1">'text-slate-400'</span><span class="s5">}</span><span class="s1">"&gt;</span><span class="s7">顺序</span><span class="s1">&lt;/button&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button onclick="state.isShuffle=true; render()" class="flex-1 py-3 rounded-xl font-bold </span><span class="s5">${state.isShuffle ? </span><span class="s1">'bg-white shadow-sm text-slate-800'</span><span class="s5"> : </span><span class="s1">'text-slate-400'</span><span class="s5">}</span><span class="s1">"&gt;</span><span class="s7">随机</span><span class="s1">&lt;/button&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s12"></span><br></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s5">${isCustom ? </span><span class="s1">`</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="bg-blue-50 p-4 rounded-2xl border border-blue-100 mb-6 text-sm text-blue-600"&gt;</span><span class="s7">上传</span><span class="s1"> .txt </span><span class="s7">或</span><span class="s1"> .csv </span><span class="s7">文件，每行一个词。</span><span class="s1">&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;input type="file" id="filePicker" onchange="handleFileUpload(event)" class="hidden" accept=".txt,.csv"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button onclick="document.getElementById('filePicker').click()" class="w-full border-2 border-dashed border-slate-300 rounded-2xl p-10 flex flex-col items-center text-slate-500 mb-6"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;i data-lucide="upload" class="mb-2"&gt;&lt;/i&gt;&lt;span&gt;</span><span class="s7">点击上传文件</span><span class="s1">&lt;/span&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/button&gt;</span></p>
<p class="p5"><span class="s10"><span class="Apple-converted-space">                            </span></span><span class="s1">${state.customWords.length &gt; </span><span class="s13">0</span><span class="s1"> ? </span><span class="s10">`</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div class="flex-1 overflow-hidden flex flex-col"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;div class="flex flex-wrap gap-2 mb-4"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                        </span></span><span class="s5">${state.customWords.map(w =&gt; </span><span class="s1">`&lt;span class="bg-white px-3 py-1 border rounded-lg font-bold"&gt;</span><span class="s5">${w.word}</span><span class="s1">&lt;/span&gt;`</span><span class="s5">).join(</span><span class="s1">''</span><span class="s5">)}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;button onclick="startDictation(null, true)" class="w-full bg-blue-600 text-white font-bold py-4 rounded-2xl mt-auto"&gt;</span><span class="s7">开始听写</span><span class="s1">&lt;/button&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>`</span><span class="s5"> : </span><span class="s1">''</span><span class="s5">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>`</span><span class="s5"> : </span><span class="s1">`</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="grid grid-cols-2 gap-4"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span></span><span class="s5">${</span><span class="s14">GRADES</span><span class="s5">.map(g =&gt; </span><span class="s1">`</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;button onclick="startDictation('</span><span class="s5">${g}</span><span class="s1">', false)" class="p-6 rounded-2xl text-xl font-bold border-2 </span><span class="s5">${</span><span class="s14">SYLLABUS</span><span class="s5">[g] ? </span><span class="s1">'border-red-100 text-red-600'</span><span class="s5"> : </span><span class="s1">'text-slate-200 border-slate-50 opacity-50 cursor-not-allowed'</span><span class="s5">}</span><span class="s1">"&gt;</span><span class="s5">${g}</span><span class="s1">&lt;/button&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>`</span><span class="s5">).join(</span><span class="s1">''</span><span class="s5">)}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>`</span><span class="s5">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span>`</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s8">else</span><span class="s1"> </span><span class="s8">if</span><span class="s1"> (state.view === </span><span class="s10">'dictation'</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">const</span><span class="s1"> word = state.sessionWords[state.currentWordIndex];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">const</span><span class="s1"> progress = ((state.currentWordIndex + </span><span class="s13">1</span><span class="s1">) / state.sessionWords.length) * </span><span class="s13">100</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>html = </span><span class="s10">`</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex flex-col min-h-screen bg-slate-50"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="p-4 bg-white flex justify-between items-center shadow-sm"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button onclick="state.view='home'; render()"&gt;&lt;i data-lucide="x-circle" class="text-slate-300"&gt;&lt;/i&gt;&lt;/button&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="text-center"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;p class="text-[10px] font-black text-slate-400 uppercase tracking-widest"&gt;</span><span class="s5">${state.selectedLevel}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;p class="text-sm font-black"&gt;</span><span class="s5">${state.currentWordIndex + </span><span class="s13">1</span><span class="s5">}</span><span class="s1"> / </span><span class="s5">${state.sessionWords.length}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="w-6"&gt;&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="w-full h-1.5 bg-slate-100"&gt;&lt;div class="h-full bg-red-500 transition-all" style="width: </span><span class="s5">${progress}</span><span class="s1">%"&gt;&lt;/div&gt;&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="flex-1 flex flex-col items-center justify-center p-6 space-y-12"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div onclick="speak('</span><span class="s5">${word.word}</span><span class="s1">')" class="w-40 h-40 rounded-full bg-red-100 flex items-center justify-center cursor-pointer shadow-inner </span><span class="s5">${state.isSpeaking ? </span><span class="s1">'ring-8 ring-red-50'</span><span class="s5"> : </span><span class="s1">''</span><span class="s5">}</span><span class="s1">"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;i data-lucide="volume-2" class="text-red-500 w-16 h-16"&gt;&lt;/i&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button onclick="speak('</span><span class="s5">${word.word}</span><span class="s1">')" class="px-8 py-3 bg-white border rounded-full shadow-sm flex items-center space-x-2 font-bold text-slate-600"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;i data-lucide="rotate-ccw" class="w-5 h-5"&gt;&lt;/i&gt;&lt;span&gt;</span><span class="s7">重读</span><span class="s1">&lt;/span&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/button&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="p-6 bg-white border-t"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button onclick="nextWord()" class="w-full bg-slate-800 text-white font-bold py-5 rounded-2xl text-lg"&gt;</span><span class="s7">写好了，下一个</span><span class="s1">&lt;/button&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span>`</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s8">else</span><span class="s1"> </span><span class="s8">if</span><span class="s1"> (state.view === </span><span class="s10">'summary'</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>html = </span><span class="s10">`</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="p-6 flex flex-col items-center min-h-screen bg-white"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="mt-12 mb-8 text-center"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="w-32 h-32 rounded-full border-8 border-green-500 flex items-center justify-center mb-6 mx-auto"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;i data-lucide="check-circle-2" class="text-green-500 w-12 h-12"&gt;&lt;/i&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;h2 class="text-3xl font-black text-slate-800"&gt;</span><span class="s7">听写完成</span><span class="s1">!&lt;/h2&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;p class="text-slate-400"&gt;</span><span class="s7">请核对纸面答案</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="w-full space-y-3 mb-10 overflow-y-auto max-h-[40vh] pr-2 custom-scrollbar"&gt;</span></p>
<p class="p5"><span class="s10"><span class="Apple-converted-space">                            </span></span><span class="s1">${state.sessionWords.map((item, idx) =&gt; </span><span class="s10">`</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div class="flex items-center justify-between p-5 bg-slate-50 rounded-2xl border"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;span class="font-black text-slate-800 text-2xl"&gt;</span><span class="s5">${item.word}</span><span class="s1">&lt;/span&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;span class="text-slate-300 font-black"&gt;#</span><span class="s5">${idx + </span><span class="s13">1</span><span class="s5">}</span><span class="s1">&lt;/span&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>`</span><span class="s5">).join(</span><span class="s1">''</span><span class="s5">)}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="w-full space-y-4 mt-auto"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button onclick="startDictation('</span><span class="s5">${state.selectedLevel}</span><span class="s1">', </span><span class="s5">${state.selectedLevel === </span><span class="s1">'</span><span class="s7">自定义</span><span class="s1">'</span><span class="s5">}</span><span class="s1">)" class="w-full bg-red-500 text-white font-bold py-5 rounded-2xl"&gt;</span><span class="s7">再练一次</span><span class="s1">&lt;/button&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button onclick="state.view='home'; render()" class="w-full bg-slate-100 text-slate-600 font-bold py-5 rounded-2xl"&gt;</span><span class="s7">返回主页</span><span class="s1">&lt;/button&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span>`</span><span class="s5">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p8"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>container.innerHTML = html;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>lucide.createIcons();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">function</span><span class="s1"> nextWord() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">if</span><span class="s1"> (state.currentWordIndex &lt; state.sessionWords.length - </span><span class="s13">1</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>state.currentWordIndex++;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>render();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>speak(state.sessionWords[state.currentWordIndex].word);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s8">else</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>state.view = </span><span class="s10">'summary'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>render();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p8"><span class="s12"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">// Initial render</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>window.onload = render;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;/</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;/</span><span class="s1">html</span><span class="s3">&gt;</span></p>
</body>
</html>
